| create_statement                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
| CREATE TABLE public.announcements (content text NOT NULL, posted_by uuid, timestamp timestamp with time zone NOT NULL DEFAULT now(), expiration timestamp with time zone, priority announcement_priority DEFAULT 'medium'::announcement_priority, id uuid NOT NULL DEFAULT uuid_generate_v4(), company_id uuid NOT NULL, title text NOT NULL);                                                                                                                                                         |
| CREATE TABLE public.companies (settings jsonb, id uuid NOT NULL DEFAULT uuid_generate_v4(), name text NOT NULL, admin_ids uuid[], created_at timestamp with time zone NOT NULL DEFAULT now());                                                                                                                                                                                                                                                                                                         |
| CREATE TABLE public.conversations (last_activity timestamp with time zone NOT NULL DEFAULT now(), name text, is_archived boolean NOT NULL DEFAULT false, unread_count jsonb, room_id uuid, created_at timestamp with time zone NOT NULL DEFAULT now(), visibility conversation_visibility_type NOT NULL DEFAULT 'public'::conversation_visibility_type, id uuid NOT NULL DEFAULT uuid_generate_v4(), type conversation_type NOT NULL, participants uuid[]);                                            |
| CREATE TABLE public.invitations (status invitation_status NOT NULL, role user_role NOT NULL, company_id uuid NOT NULL, email text NOT NULL, token text NOT NULL, id uuid NOT NULL DEFAULT gen_random_uuid(), created_at timestamp with time zone NOT NULL DEFAULT now(), expires_at timestamp with time zone NOT NULL);                                                                                                                                                                                |
| CREATE TABLE public.meeting_note_action_items (assignee_id uuid, due_date timestamp with time zone, completed boolean NOT NULL DEFAULT false, created_at timestamp with time zone NOT NULL DEFAULT now(), id uuid NOT NULL DEFAULT uuid_generate_v4(), note_id uuid NOT NULL, description text NOT NULL);                                                                                                                                                                                              |
| CREATE TABLE public.meeting_notes (id uuid NOT NULL DEFAULT uuid_generate_v4(), room_id uuid NOT NULL, title text NOT NULL, meeting_date timestamp with time zone NOT NULL, transcript text, summary text NOT NULL, generated_by note_generator NOT NULL, edited_by uuid, created_at timestamp with time zone NOT NULL DEFAULT now(), updated_at timestamp with time zone NOT NULL DEFAULT now());                                                                                                     |
| CREATE TABLE public.message_attachments (type text NOT NULL, created_at timestamp with time zone NOT NULL DEFAULT now(), thumbnail_url text, url text NOT NULL, size integer NOT NULL, id uuid NOT NULL DEFAULT uuid_generate_v4(), message_id uuid NOT NULL, name text NOT NULL);                                                                                                                                                                                                                     |
| CREATE TABLE public.message_reactions (id uuid NOT NULL DEFAULT uuid_generate_v4(), message_id uuid NOT NULL, user_id uuid NOT NULL, emoji text NOT NULL, timestamp timestamp with time zone NOT NULL DEFAULT now());                                                                                                                                                                                                                                                                                  |
| CREATE TABLE public.messages (id uuid NOT NULL DEFAULT uuid_generate_v4(), conversation_id uuid NOT NULL, sender_id uuid, content text NOT NULL, is_edited boolean NOT NULL DEFAULT false, reply_to_id uuid, status message_status NOT NULL, type message_type NOT NULL, timestamp timestamp with time zone NOT NULL DEFAULT now());                                                                                                                                                                   |
| CREATE TABLE public.space_members (joined_at timestamp with time zone NOT NULL DEFAULT now(), role member_role_type NOT NULL, user_id uuid NOT NULL, space_id uuid NOT NULL, id uuid NOT NULL DEFAULT uuid_generate_v4());                                                                                                                                                                                                                                                                             |
| CREATE TABLE public.space_presence_log (id uuid NOT NULL DEFAULT uuid_generate_v4(), space_id uuid NOT NULL, user_id uuid NOT NULL, entered_at timestamp with time zone NOT NULL, exited_at timestamp with time zone, session_type session_type_enum, context text, authorized_by uuid);                                                                                                                                                                                                               |
| CREATE TABLE public.space_reservations (id uuid NOT NULL DEFAULT uuid_generate_v4(), space_id uuid NOT NULL, user_id uuid NOT NULL, user_name text, start_time timestamp with time zone NOT NULL, end_time timestamp with time zone NOT NULL, purpose text, created_at timestamp with time zone NOT NULL DEFAULT now());                                                                                                                                                                               |
| CREATE TABLE public.spaces (id uuid NOT NULL DEFAULT uuid_generate_v4(), company_id uuid NOT NULL, name text NOT NULL, type space_type NOT NULL, status space_status NOT NULL, capacity integer NOT NULL DEFAULT 0, features text[], position jsonb, description text, access_control jsonb, created_by uuid, created_at timestamp with time zone NOT NULL DEFAULT now(), updated_at timestamp with time zone NOT NULL DEFAULT now(), is_template boolean NOT NULL DEFAULT false, template_name text); |
| CREATE TABLE public.users (id uuid NOT NULL DEFAULT uuid_generate_v4(), supabase_uid text, company_id uuid, email text NOT NULL, display_name text NOT NULL, avatar_url text, status user_status NOT NULL DEFAULT 'offline'::user_status, status_message text, preferences jsonb, role user_role NOT NULL DEFAULT 'member'::user_role, last_active timestamp with time zone NOT NULL DEFAULT now(), created_at timestamp with time zone NOT NULL DEFAULT now(), current_space_id uuid);                |